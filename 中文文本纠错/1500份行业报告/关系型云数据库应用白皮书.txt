



据研究所、CCSATC601大数据技术标准推进委员会，并受者观点的，应注明“来源：《关系型云数据库应用白皮书》”。违反上述声明者，作者将追究其相关法律责任。
法律保护。转载、摘编或利用其它方式使用本白皮书文字或




数据库管理软件承载着信息系统中的关键数据，是IT系统的核库支撑。库的时候，还需要做好技术选型、应用评估、迁移方案等工作。。型方法、业务影响评估、实施路径，并提出了相关建议。
心组件。其中关系型数据库是发展历程最长、应用最广泛的一类数据库管理软件，金融、电信等关键行业的核心业务系统均由关系型数据当前信息系统云化的步伐不断加快，关系型数据库技术也适应云计算的发展，逐步适配底层云架构和弹性管理模式。各数据库服务商和云服务商纷纷推出关系型云数据库产品。用户在使用关系型云数据本白皮书紧密围绕关系型云数据库应用过程中的关键问题，梳理了关系型云数据库的发展状况与技术体系，分析了关系型云数据库选






云计算的快速发展，带动各类基础软件开始云化转型之路。关系型数据库作为重要的基础软件，在云化大潮下，逐渐发展出关系型云数据库技术路线。本章主要介绍关系型云数据库发展背景、技术特点面对数据规模的爆炸式增长，以及数据应用模式的不断丰富，企业使用传统关系型数据库支撑新业务时，开始频繁出现新旧业务资源分配不合理，软硬件结构配置欠优化等问题，这促进了云计算和虚拟化技术的快速发展，开始利用虚拟化技术屏蔽硬件的物理隔离性，以服务模式代替独立部署模式，将可配置的资源（网络，服务器，存储，随着云计算技术的大规模应用，传统各类软件产品都开始由独自部署模式向云服务模式转变。其中关系型数据库作为信息系统核心软
以及主要类别。依赖系统等）形成共享资源池，实现弹性和高效的资源利用件，逐渐被数据库企业附加云化能力，形成关系型云数据库，以服务或产品形式对外提供技术支撑。根据分析机构Gartner预测，2012至2016年公有云数据库的年复合增长率将高达86%，而到2019年数据库云市场规模将达到140亿美元。未来五年，数据库即服务（DBaaS）将成为平台即服务（PaaS）中增长最快的领域。


关系型云数据库既能够兼容云上事务类场景对数据库的需求，又利用云计算分布式、虚拟化、专业运维的优势对用户屏蔽了底层资源调度和维护的大量繁杂工作，可以使用户专注于应用本身的优化与运营。所以关系型云数据库的能力特点应囊括关系型数据库基础能力和自身无需一直维护数据库系统服务正常性，接口统一，便于管
云化能力两部分特征。其中关系型数据库基础能力已经被广泛认知，不再过多赘述。而云化能力主要体现在以下6个方面：据库服务流程，只需按计划申请相应资源即可理性合同，完全根据数据库服务调用行为进行费用结算供运维管理，用户关注应用本身源的弹性伸缩，及时响应业务需求

敏捷上线：当应用上线或变更时，无需从底层基础设施规划数
可集成性：安全性以及运维操作通过云数据库平台统一接管，
按需结算：无需像传统项目形式进行预付费或者签署长期阶段
托管运维：无需维护升级管理数据库，由服务商或统一平台提
扩展灵活：资源利用灵活性好，能够实现快速计算以及存储资


成包含CPU、内存、磁盘、I/O等硬件动态“资源池”，实现阿里云、华为云上的MySQL、PostgreSQL实例。算能力的横向扩展性。比如亚马逊Auraro、阿里云PolarDB等。模式：特点是“即买即用”，以及应用方无需管理硬件等。等。特点是“自由资源池化”，“数据不外流”等。
资源整合、简化管理、提高效率等目标。而关系型数据库以虚拟化资源中的镜像形态存在，对外提供数据库能力。比如过数据库内部计算与存储分离，将存储管理放到下层共享存储中，从而解决数据同步带来的延时问题，并同时增加了计关系型云数据库根据底层物理资源管理方的不同分为两种部署赖的底层物理资源，并由云服务商提供资源运维管理，应用方只需通过某种付费模式租用使用权限，之后通过公网或某种连接方式远程连接到关系型云数据库中，完成业务操作。物理资源，数据库服务商负责部署关系型云数据库软件，后期应用方和数据库服务商约定运维维护工作的具体职责分配

计算存储分离的云原生数据库：在动态“资源池”基础上，通
公有云部署模式：由云服务商为用户提供关系型云数据库依
私有云部署模式：由应用方提供关系型云数据库依赖的底层


列表，为读者梳理产业当前现状。可以看出当前关系型云数据库主要当前市场上关系型云数据库种类繁多，技术能力参差不齐，用户选择关系型云数据库过程中，缺乏量化的选型标准，无法准确衡量关
以传统数据库实例架设在云资源上为主，同时MySQL、PostgreSQL是主流云服务厂商提供最多的关系型云数据库类型。系型云数据库能力水平。中国通信标准化协会TC601从2018年7月开始，组织国内一线关系型云数据库产品提供商，编写了《大数据关系型云数据库技术要求与测试方法》规范。本章基于上述规范，梳


理了关系型云数据库选型的核心要素。这些要素包括基本功能、兼容能力、高可用能力、云服务能力、安全性要求、监控和优化、服务支关系型云数据库应该具备传统关系型数据库系统的基本功能，从而在最大限度简化当前业务系统和业务人员适配工作的同时，保障数兼容能力代表了关系型云数据库与现有业务系统和通用数据存储模式的衔接能力，这类指标衡量了关系型云数据库在落地过程中工
持、可扩展性、性能九个部分。据库业务的正常运转。基本能力类指标如下表所示。
支持在多种隔离级别下，实现数据操作的完整性约束，即
ACID属性⚫涵盖int,double,string等常用数据类型

涵盖|，&,!常见操作符
支持utf-8,gbk等常见字符集备份恢复

涵盖日期函数、算数函数等常见函数⚫涵盖常见功能操作语句类型，如增删改查、子查询、连接、排序等⚫能够完成数据类型隐式转换工作支持关系型数据表的创建、删除支持关系型数据的插入、删除、修改索引能够建立适应精准查询和范围查询的索引分区支持数据表分区功能视图能够创建、删除、修改基于SQL语句结果集的可视化表存储过程能够完成类似Oracle数据存储过程同功能自定义函数能够实现可编程函数⚫能够实现日志、数据和配置的全量、增量、定时备份功能⚫支持备份下载到本地⚫备份的日志、数据和配置能够按照时间、备份点恢复⚫恢复对象可以为主实例或者新实例


作量大小以及落地过程后对现有业务生态造成的影响大小。兼容能力关系型云数据库作为各类数据业务的基础支撑设施，高可用能力必须得到保障，从而在硬件、软件、网络等异常情况发生时，数据库服务不出现问题，满足各行业用户应用和监管要求。高可用能力类指此类能力是关系型云数据库区别于传统关系型数据库的本质，其
类指标如下表所示。标如下表所示。

能够支持本地平面文件的数据迁移⚫能够支持本地或云端同构数据库的表、索引、配置的迁移，⚫能够支持本地或云端异构数据库的表、索引、配置的迁移
用连接方式数据导出支持关系型云数据库的数据导出到本地提供开放接口，比如Restful或者SDK等，供用户进行继承和二次开发开放日志数据库的binlog、审计日志、备份支持下载或者转储功能
在高可用架构下，数据库服务发生故障，通过高可用机制可以自动接管并继续对外提供服务，无须人工干预多可用区实例
支持多可用区实例⚫实例是否能够在可用区间迁移（推荐）


面的能力。云服务能力类指标如下表所示。管机构的合规审查要求。安全类指标如下表所示。
关系型云数据库实例参数支持调整，例如缓冲区大小、最大并发数等提供单副本，双副本，多副本等形态供用户部署关系型云数据库实例
支持多种数据库引擎，如MySQL、MariaDB、PostgreSQL等，同时支持多个主流版本提供Web控制台和api两种方式管理云数据库支持VPC和公网访问
提供多种配置的数据库实例，例如不同CPU、不同内存、不同磁盘等⚫云服务提供商可以提供关系型云数据库的多种计费方式，满足用户的不同需求，例如可以提供：按配置计费，包年包月，按小时计费⚫支持计费类型的变更自动续费具备自动续费功能多种网络接入方式支持web控制台和api操作重启实例支持手动重启实例升级实例支持大版本或小版本的数据库内核版本升级资源隔离若用户选择资源独占形式，则独占资源支持CPU、内存、（推荐）存储等资源的不被抢占
完整的安全能力能够使关系型云数据库稳定承担各类业务负载，同时防止用户敏感数据的泄露，杜绝非计划性的误操作，同时满足监


数据隔离能够保证不同用户间的数据互相隔离⚫支持创建、修改、删除账号，并配置和修改密码⚫根据不同账号，对数据库各个级别权限控制，包括：实例级别，库级别，表级别，列级别⚫可支持审计功能，记录用户执行的重要操作⚫审计功能可根据用户设置开启或关闭支持IP白名单功能，位于白名单中的IP或IP段可以访问数据库，不在白名单中的IP将被阻止⚫可记录用户通过控制台或API发起的关键操作和错误操作，例如创建备份，重启等⚫用户可查询这些操作记录⚫表加密：通过函数形式，对特殊表进行加密操作⚫传输加密：在用户业务和数据库中间的数据传输全部加密。⚫备份加密：所有数据库的备份文件全部加密⚫透明加密：磁盘上的数据是加密形态
完整而友好的监控和优化能力能够为关系型云数据库运维工作提供有力的支撑，从而使相关数据库运维管理人员、数据库业务负责人、相关应用支撑团队拥有对数据库的良好掌控能力。监控和优化类
指标如下表所示。

可提供各种常用的监控指标，例如CPU，内存，磁盘空间等使用信息，集群状态信息、流量信息、数据信息、锁情况等⚫用户可以通过控制台进行查看，并进行频率或范围的自定义（推荐）⚫可支持自定义告警，用户可以根据监控的各种指标制定告警规则，告警可以通过短信、邮件等方式通知用户


关系型云数据库由数据库应用企业和云数据库提供商共同负责，而其中云服务商能够提供的服务能力很大程度影响了到数据库应用企业在关系型云数据库上需要持续投入的资源数量，所以好的服务支持能力能够有效减轻数据库应用企业负担。服务支持类指标如下表所关系型云数据库需要能够在客户业务无明显感知的基础上，通过灵活的可扩展性，满足客户业务增长的需求，解决现有数据库应用在磁盘容量、性能等方面暴露出来的瓶颈。可扩展能力类指标如下表所
示。示。

能够在客户云数据库的使用前，使用中和使用后提供各种咨询服务、技术指导及解决方案构建等专家团队支持⚫包括但不限于安全、性能方面的建议，配置升级建议、数据库索引建议、数据库SQL建议

开发规范：指导业务开发人员合理进行数据库选型、访问使用、SQL语句规范。⚫运维规范：提供完善的数据库运维规范，包括部署安装规范、账户规范、上线规范、故障处理流程等⚫产品说明：价格、使用手册、推荐配置，FAQ
可用根据用户需求，进行数据库实例配置（CPU，内存及磁盘大小）的升级或降级
支持多种读写分离策略，例如路由、权重、随机等

1、用户可以创建1个或多个只读实例，应用可以连接到只读实例上进行只读操作⚫2、只读实例跟主实例之间有同步或异步的数据复制


关系型云数据库应该能够满足用户业务负载的性能要求。但由于硬件和执行负载不同将会影响关系型云数据库性能结果，所以用户应根据自身实际业务需求完成关系型云数据库性能测试。本白皮书提供传统关系型数据库和关系型云数据库在应用过程中，硬件形态和软件架构具备较大差异，导致业务开发准则、运维管理模式、商务售本章分析应用关系型云数据库前，应用方应该注意到的多方面变化，并给出应对方案，从而指导相关人员从业务设计和实际操作等方传统的商用数据库最大的优势在于稳定性，稳定性一部分的原因
一些性能测试过程中的参考事项。网络链路，内存总量，CPU总量，磁盘总量等；实际业务相符的数据模式和操作模式；量，平均时延，最大时延，执行时间等；性测试等。卖形态等方面发生变化。面完成意识认知和过渡。

测试需基于一定资源冗余的硬件环境，包括服务器节点规模，
测试需定义良好的测试业务场景，包括合理规模的数据量，与
测试需定义合理的衡量指标，例如单节点吞吐量，系统总吞吐
常见的测试场景包括多类型查询，混合负载，压力测试，稳定


是由于软件架构经过了几十年的实践后十分成熟，另一部分原因是依赖于高端可靠的硬件基础，甚至是专用硬件设备上。而关系型云数据的同时，也带来了一定的稳定性风险。我们需要假定硬件本身的不可靠性，同时考虑分布式架构开始替换集中式架构占据主流，从而我们需要在架构和技术上重新设计保障业务高可用和高可靠性的方案。常见的技术包括多主多从服务、多副本备份、快速故障转移修复、自动关系型云数据库的一大优势在于弹性的资源伸缩，理想模式是当某项业务系统出现资源瓶颈时，可以随时调整该部分业务系统的资源大小，从而完成性价比最高的扩容方案。但是这就要求应用方不能像传统集中式数据库应用方式一样将所有业务放到同一个数据库中，从而无法针对性的完成资源调整。业务设计应改为松耦合的结构，比如间互相通过接口进行连接，企业可以灵活调整每个子系统的资源大小，受限于先期固定资产的投资以及传统长周期的资产采购模式，业务设计及应用时需要考虑固定资产可支撑的能力范围，做出功能取舍。但是如果应用关系型云数据库，在私有云形式下，资源的上限转变成了整个资源池大小，在公有云形式下，资源是按需付费模式，理论上
库则是运行在以X86架构为代表的普通商用硬件上，带来价格优势化监控机制等。同时应用端应该具备健康检测，服务熔断的配合策略。
2）配合云资源特点的弹性业务设计模式SOA、微服务架构。这样每一个业务模块都是一个独立的子系统，之从而充分利用弹性资源的优势。
3）业务快速迭代下的灵活容量规划方案


将不再具备上限。所以业务系统的设计无需前期根据资产做出过多规数据库是一个系统架构的核心组件，任何涉及到数据库的调整，都是一个“伤筋动骨”的手术。特别是从企业级架构上进行商业数据库到关系型云数据库的整体更换迭代，将是一个漫长的持续过程。在这个过程内，就涉及到“新旧”数据库并存问题。故相应业务系统以传统数据库运维在制定运维目标时，需要关注设备的故障率和业务系统的可用性，采用竖井式的集中运维方式。数据库运维人员依靠人工和流程来做数据库系统的变更管理、容量管理、数据安全、数据备份和故障响应等，这种运维方式效率相比较低。随着关系型云数据库时代的到来，数据库运维方式发生了很大改变。云数据库的特点支持业务系统的快速上线、弹性伸缩、以及更高的可用性要求；减轻了相当一部分数据库运维人员的运维压力。因此关系型云数据库对传统传统数据库管理既要关注数据库本身的运维管理（比如高可用、
划，而应转变为根据业务快速重构、随时调整的项目思想。
4）多形态数据库并存及运维监控系统需要配套以下功能：
异构数据库间数据迁移方案
异构数据库间业务服务备份方案
数据库运维整体方案数据库运维人员的运维模式的改变主要体现在以下几个方面。
1）传统数据库运维职责的改变


实力管理、备份与恢复、监控与告警、故障响应等），同时还要关注使用关系型云数据库后，数据库运维管理人员只需要关注业务运维，在云计算时代的运维场景中，运维复杂度更高，需要尽可能减少人为主观操作，以自动化运维代替绝大部分工作，甚至实现智能化运维。运维场景中的各种状态信息需要转化为数据，通过策略来自动化触发各种运维操作。基于数字化和自动化的理念，数据库运维的各种操作包括容量管理、数据备份、变更管理、故障管理和数据安全等，这些最好统一集成在管理控制平台中，从而云数据库的运维操作都基于管理控制台来执行。对关系型云数据库使用者来说，只需要通过管在数据库运维管理过程中，会制定不同故障场景、不同故障等级
业务对数据库的使用（比如SQL优化、SQL评审等）。数据库上云或关系型云数据库服务负责实例运维等内容。数据库服务上云后，数据库运维权责划分如下。理控制台就可以完成自动化运维管理过程，更加简单易用。
3）传统数据库运维预案的改变


情况下的处理预案，这些预案都是基于数据库自主管理可控的情况进行的。但数据库服务上云之后，处理预案就有所变化。首先在高可用架构上，需要充分利用云数据库高可用架构能力搭建自己高可用数据情况下的快速切换和服务恢复；最后需要和关系型云数据库服务商建立应急事件响应机制，确保故障第一时间和云数据库服务商取得联系，式进行授权，按照软件许可费用比例进行收取常规运维费用，一般以年为周期。关系型云数据库的商业模式发生了明显的变化，主要有以际需求进行按需配给数据库服务，最终按照实际使用的“量”
实例数量、配置等）进行租用。同时关系型云数据库的常但是私有云数据库为集约化形式，存在虚拟化和资源复用方面的优势，从而资源成本通常比传统建设方案成本更低，而由于云数据库管理部分可以下沉到云平台，因此所需的人力
库服务；其次需要充分利用云数据库提供的开放API接口，实现故障享受7*24小时的服务保障体验。传统的商业数据库倾向于提供产品，以软件许可（license）的模下两种模式：规运维费用包含在软件费用内，所以运维费用也是按需收取。所以仍需考虑资源（IT基础设施）成本以及对应的人力成本，资源成本也更低。

公有云上关系型云数据库的理念是服务供给，客户可根据实
私有云上关系型云数据库由于是建设在应用方的机房当中，


关系型数据库是企业信息系统的关键组件，其云化实施过程若管控不当，则会存在上层业务连续性中断风险，所以在云化实施过程前，应完成确定总体实施原则，梳理关键系统要素，规划详细实施步骤，关系型数据库上云工作的开展，需要结合业务特点、业务发展要求、行业发展趋势、甚至社会经济发展方向，制定符合信息技术发展要求的业务关系型数据库上云工作开展的指导原则，这里主要有以下各行业在应用关系型云数据库的过程中，在迁移阶段，要充分评估和考量关系型云数据库架构的可持续性发展，迁移过程中要考虑到在应用关系型云数据库的过程中，迁移过程需要尽可能按照透明
从而确保关系型云数据库云化实施的正确性、稳定性保证。原则：1、满足业务的可持续发展应用适配和调整策略符合中长期的发展要求。续发展；续性发展；的可持续发展。2、透明开放原则

是否具备灵活开放的许可证模式，从而满足商务模式的可持
是否具备区域变迁容错性，从而保障未来地域变动下的可持
是否具备随业务场景调整的能力，从而满足业务增长或调整


开放的原则来进行各种任务的规划和要求。尤其是对关系型云数据库在应用关系型云数据库迁移的过程中，一定会涉及到对业应用的资金、风险和人员方面的成本存在。选择迁移路径方法的过程中，要上云前合理和可控：一是数据库上云前需要合理的进行评估和调
的核心架构、应用接口、运维管理架构等应从规划、测试、维护、定制等多个方面，保证透明和开放度。
核心存储计算架构透明开放度；
应用接口和应用平台接口规范的透明开放度；
底层部署和运行架构的透明开放度；
扩缩容及变更运维平台/工具的透明开放度；
测试工具和用例的透明开放度；
功能的可定制接口透明开放度。3、代价可控原则调整和优化，随着业务系统自身复杂性差异，这种调整会伴随有时间、尽可能选择总体迁移代价最优路径。典型的考量有：
应用适配代价；
基础设施资源支撑代价；
运维管理基础设施调整代价；
变更和应急代价；
人员能力掌握和维持代价。4、上云过程可控原则


研上云的可行性，制定合理的上云方案，二是数据库上云前需要确认上云中平滑和高效：一是数据库迁云过程需要确保不停机，数据库读写服务不受影响，二是数据库迁云过程需要涉及到数据搬迁，数在明确将关系型数据库迁移上云的场景，通常按照如下流程进行务系统迁移方案另行准备），因此，在数据迁移前，也需要评统部署时间比较久远，可能疏于管理。就会导致数据库中存在未知业务系统的引用，为了保障整体迁移不错不乱，需要完整梳理和定位每一个需要迁移的数据库访问来源，避免迁移要求进行整体分析，例如对云数据库兼容性要求，迁移成
据搬迁传输效率越高，风险越小。评估：估客户现有的系统架构，为数据库安全稳定的迁移打下基础。能利用率进行评估，以便于初步判断所需云数据库的规模。移后出现某些系统无法正常访问的情况。本、计划停机时间、性能要求、是否需要改造，成本要求等。

资源和利用率评估：针对现有系统的资源（软硬件），以及性
应用系统与关联模块评估：需要特别注意的是，由于某些系
数据库迁移要求评估：数据库的迁移要求需配合业务系统迁
数据迁移技术需求与风险评估：针对数据库迁移的技术需求，


相关工具、以及可能的数据丢失错乱等风险进行完整风险。正，改进业务迁移的流程和工作手册，以满足业务的实际需要。2、系统测试少包括以下几个重点。
系统连通性测试：上云后对外围系统进行全面的连接测试；上云后系统与网络的连接测试等。
业务功能测试上云后系统与老系统的连接测试；上云后系统运行批处理测试；完成数据同步后，执行批处理测试；试等。
安全性测试上云后系统自身权限认证能力测试；上云后系统与第三方安全组件对接测试。
业务正式迁移前可模拟一个批次的业务在云平台上的运行情况。从而验证业务迁移的高效和正确，针对模拟过程发现各类问题进行修在云平台上运行模拟业务时，对模拟的业务进行一次全方位的测试，以确保业务迁移到云环境中后能够满足业务需求，测试方面须至完成数据同步后，从应用部分发起执行高风险业务功能的测


上云后系统软件稳定性测试。3、数据备份据进行备份。4、数据校验后的数据做一致性校验。5、正式迁移整，使之满足业务系统的需要，并投入实际使用。
正式迁移前，为确保业务数据的完整性、降低迁移风险，为回滚机制创造必要条件，需要将业务系统及数据进行备份，为提高抗风险能力，建议采用多种备份方式、多份备份数据的方式对业务系统及数在正式迁移数据前，为保证迁移前后数据一致性，需要对上云前根据确定的业务迁移方案，正式实施业务迁移，根据业务迁系统试方案测试业务迁移效果，并对业务迁移后的系统参数和性能进行调随着云计算的不断发展，关系型数据库必须适应上云潮流，关系型云数据库有可能成为各用户单位未来应用数据库的主要形态。但技术创新过程中，需考虑系统层的整体关联情况和变迁，防止业务中断风险，所以在关系型云数据库应用过程中，各用户单位均需经历选型、适配、实施三个步骤。本白皮书针对上述三个步骤提出了参考建议。


选型方面，应注意当前关系型云数据库主要分为虚拟化资源上架设传统关系型数据库和计算存储分离架构的云原生数据库两种形态，其关键能力分为基本功能、兼容能力、高可用能力、云服务能力、安全性要求、监控和优化、服务支持、可扩展性八个部分。适配方面，应注意云化后业务设计、运维模式、商务模式等方面将产生变化，用户单位应提前准备。实施方面，应建立指导原则、梳理关键要素、制定实
施流程，从而保障实施过程正确、稳定完成。


